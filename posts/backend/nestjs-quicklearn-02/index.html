<!doctype html>
<html lang="ko"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>NestJS 빠르게 배우기 02 - Changhoi Kim</title><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="white"><meta name="application-name" content="Changhoi Kim"><meta name="msapplication-TileImage" content="/img/favicon.ico"><meta name="msapplication-TileColor" content="white"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Changhoi Kim"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="지난 글에서는 Controller에 대해서 알아봤다. 이번 글에서는 Provider가 뭔지 알아보도록 하자."><meta property="og:type" content="blog"><meta property="og:title" content="NestJS 빠르게 배우기 02"><meta property="og:url" content="https://changhoi.kim/posts/backend/nestjs-quicklearn-02/"><meta property="og:site_name" content="Changhoi Kim"><meta property="og:description" content="지난 글에서는 Controller에 대해서 알아봤다. 이번 글에서는 Provider가 뭔지 알아보도록 하자."><meta property="og:locale" content="ko_KR"><meta property="og:image" content="https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcQrPO0DAItnewF8q-FXXT_sT8FP5cBUjdv36Ul4jIaW8oPstDwg"><meta property="article:published_time" content="2020-03-20T15:00:00.000Z"><meta property="article:modified_time" content="2020-03-20T15:00:00.000Z"><meta property="article:author" content="changhoi"><meta property="article:tag" content="typescript"><meta property="article:tag" content="nestjs"><meta property="article:tag" content="NestJS_빠르게_배우기"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcQrPO0DAItnewF8q-FXXT_sT8FP5cBUjdv36Ul4jIaW8oPstDwg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://changhoi.kim/posts/backend/nestjs-quicklearn-02/"},"headline":"NestJS 빠르게 배우기 02","image":[],"datePublished":"2020-03-20T15:00:00.000Z","dateModified":"2020-03-20T15:00:00.000Z","author":{"@type":"Person","name":"changhoi"},"publisher":{"@type":"Organization","name":"Changhoi Kim","logo":{"@type":"ImageObject","url":"https://changhoi.kim/img/logo.jpg"}},"description":"지난 글에서는 Controller에 대해서 알아봤다. 이번 글에서는 Provider가 뭔지 알아보도록 하자."}</script><link rel="canonical" href="https://changhoi.kim/posts/backend/nestjs-quicklearn-02/"><link rel="alternate" href="/rss2.xml" title="Changhoi Kim" type="application/atom+xml"><link rel="icon" href="/img/favicon.ico"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link data-pjax rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link data-pjax rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=G-QBSLW6WTZW" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'G-QBSLW6WTZW');</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css"><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.jpg" alt="Changhoi Kim" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item is-hidden-tablet catalogue" title="카탈로그" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="검색" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="fill" src="https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcQrPO0DAItnewF8q-FXXT_sT8FP5cBUjdv36Ul4jIaW8oPstDwg" alt="NestJS 빠르게 배우기 02"></span></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time datetime="2020-03-20T15:00:00.000Z" title="2020. 3. 20. 오전 8:00:00">2020-03-21</time>&nbsp;게시 됨</span><span class="level-item"><time datetime="2020-03-20T15:00:00.000Z" title="2020. 3. 20. 오전 8:00:00">2020-03-21</time>&nbsp;업데이트 됨</span><span class="level-item"><a class="link-muted" href="/categories/backend/">backend</a></span><span class="level-item">11분안에 읽기 (약 1604 단어)</span></div></div><h1 class="title is-3 is-size-4-mobile">NestJS 빠르게 배우기 02</h1><div class="content"><p><a href="/posts/backend/nestjs-quicklearn-01">지난 글</a>에서는 <code>Controller</code>에 대해서 알아봤다. 이번 글에서는 <code>Provider</code>가 뭔지 알아보도록 하자.</p>
<span id="more"></span>

<h2 id="Provider"><a href="#Provider" class="headerlink" title="Provider"></a>Provider</h2><p><code>Provider</code>를 확인해보자. 문서에서 말하기로는 Provider가 가장 핵심적인 역할을 하는 곳이라고 한다. 많은 Nest의 기본 클래스들은 Provider로서 취급된다. (services, repositories, factories, helpers 등) Provider의 기본적인 아이디어는 의존성을 주입하는 것이다. 즉, 객체들이 다른 것들과 다양한 관계를 만들 수 있다는 것이다. 하나의 Provider는 <code>@Injectable()</code> 데코레이터로 간단하게 클래스에 annotated된 형태이다.</p>
<p><img src="https://docs.nestjs.com/assets/Components_1.png"><br><small>공식 문서에서 제공해주는 이미지</small></p>
<h3 id="Services"><a href="#Services" class="headerlink" title="Services"></a>Services</h3><p>앞에 예시에서 사용한 것처럼 <code>Cat</code>과 관련된 예시로 시작해보자 (Nest는 고양이를 좋아한다. 이미지도 고양이임). <code>CatsService</code>는 데이터 저장과 검색에 대한 일을 한다. 그리고 이것은 <code>CatController</code>에서 동작하도록 설계되었다. 그래서 이러한 경우는 <code>provider</code>로서 정의되기 좋다. 따라서, 우리는 <code>@Injectable</code> 데코레이터로 이 클래스를 데코레이트 하면 된다.</p>
<blockquote>
<p>service를 CLI를 통해서 만들 수 있는데, 아래와 같은 서비스는 <code>nest g service cats</code> 명령어로 실행 가능하다.</p>
</blockquote>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// cats.service.ts</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Injectable</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@nestjs/common&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Cat</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./interfaces/cat.interface&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Injectable</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">CatService</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">readonly</span> <span class="attr">cats</span>: <span class="title class_">Cat</span>[] = [];</span><br><span class="line"></span><br><span class="line">  <span class="title function_">create</span>(<span class="params">cat: Cat</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">cats</span>.<span class="title function_">push</span>(cat);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">findAll</span>(): <span class="title class_">Cat</span>[] &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">cats</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// interfaces/cats.interface.ts</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">interface</span> <span class="title class_">Cat</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>;</span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span>;</span><br><span class="line">  <span class="attr">bread</span>: <span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>위와 같이 <code>CatsService</code>는 두 메서드와 하나의 프로퍼티를 가지고 있는 클래스이다. 새로운 특정은 <code>@Injectable()</code> 데코레이터를 사용했다는 것인데, 이 데코레이터는 메타데이터를 붙여준다. 그 메타데이터는 Nest에게 이 클래스가 <code>Provider</code>라는 점을 알려준다.</p>
<p>이 서비스를 <code>CatsController</code>에 담아보면 아래와 같다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Controller</span>, <span class="title class_">Get</span>, <span class="title class_">Post</span>, <span class="title class_">Body</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@nestjs/common&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">CreateCatDto</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./dto/create-cat.dto&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">CatsService</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./cats.service&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Cat</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./interfaces/cat.interface&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span>(<span class="string">&quot;cats&quot;</span>)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">CatsController</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="keyword">private</span> catsService: CatService</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Post</span>()</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">create</span>(<span class="params"><span class="meta">@Body</span>() createCatDto: CreateCatDto</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">catsService</span>.<span class="title function_">create</span>(createCatDto);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Get</span>()</span><br><span class="line">  <span class="keyword">async</span> <span class="title function_">findAll</span>(): <span class="title class_">Promise</span>&lt;<span class="title class_">Cat</span>[]&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">catsService</span>.<span class="title function_">findAll</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>CatsService</code>는 class의 생성자를 통해서 주입된다. <code>@Injectable()</code>를 사용하면, 뱔도의 작업 없이(<code>constructor</code>에서 담아주는 것을 빼고) 클래스 내부에서 <code>this</code>로 접근해 사용할 수 있게 된다. <code>typedi</code>를 사용했을 때와 유사하다.</p>
<h3 id="Scopes"><a href="#Scopes" class="headerlink" title="Scopes"></a>Scopes</h3><p>Provider는 일반적으로 애플리케이션의 라이프타임과 동일한 라이프타임을 갖는다. 애플리케이션이 시작되면, 모든 의존성들이 주입되고, 그리고 모든 Provider가 인스턴스화된다. 마찬가지로, 애플리케이션이 종료되면, 각 Provider들은 파괴된다. 하지만, Provider의 라이프타임을 <code>request-scope</code>로 만들 수도 있다. 해당 내용은 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://docs.nestjs.com/fundamentals/injection-scopes">이 글</a>에서 읽어볼 수 있다.</p>
<h3 id="Custom-providers"><a href="#Custom-providers" class="headerlink" title="Custom providers"></a>Custom providers</h3><p>Nest는 provider 사이의 관계를 정리해주는 내장된 제어 역전 (IoC) 컨테이너가 있다. 제어의 역전과 의존성 주입과 관련된 OOP와 연관된 개념은 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://develogs.tistory.com/19">이 링크</a>에서 확인해보자. 이러한 특징들은 위에서 언급했던 의존성 주입과 관련된 특징들에 기반해 있다. <code>@Injectable()</code> 데코레이터는 사실 Provider를 정의하는 유일한 방법은 아니고, 일반적인 값, 클래스들, 비동기 또는 동기 factories를 사용할 수도 있다 더 자세한 내요은 <a target="_blank" rel="external nofollow noopener noreferrer" href="https://docs.nestjs.com/fundamentals/dependency-injection">이 링크</a>에서 확인할 수 있다.</p>
<h3 id="선택적-Optional-Providers"><a href="#선택적-Optional-Providers" class="headerlink" title="선택적(Optional) Providers"></a>선택적(Optional) Providers</h3><p>의존성 중에서는 반드시 필요 없는 의존성이 존재할 수도 있다. 즉 옵셔널하게 사용되는 경우가 있다는 뜻인데 이러한 경우에서는 <code>@Optional()</code>데코레이터를 생성자에 사용해줄 수 있다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Injectable</span>, <span class="title class_">Optional</span>, <span class="title class_">Inject</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@nestjs/common&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Injectable</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">HttpService</span>&lt;T&gt; &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="meta">@Optional</span>() <span class="meta">@Inject</span>(<span class="string">&quot;HTTP_OPTIONS&quot;</span>) <span class="keyword">private</span> httpClient: T</span>) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Property-based-Injection"><a href="#Property-based-Injection" class="headerlink" title="Property-based Injection"></a>Property-based Injection</h3><p>위에서 계속 사용된 기술들은 생성자 기반의 주입이라고 (class-based injection) 볼 수 있다. 특별한 경우에는 프로퍼티 기반의 주입 (Property-based injection)을 사용할 수도 있는데, 예를 들어서 최상위 클래스가 하나 또는 다수의 providers에게 의존성을 가지고 있다면, 이러한 경우에 하위 클래스에서 <code>super</code>를 통해 넘겨주는 것은 그렇게 좋은 방법은 아니다. 이러한 경우를 피하기 위해서 <code>@Inject()</code> 데코레이터를 프로퍼티에게도 사용할 수 있다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Injectable</span>, <span class="title class_">Inject</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@nestjs/common&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Injectable</span>()</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">HttpService</span>&lt;T&gt; &#123;</span><br><span class="line">  <span class="meta">@Inject</span>(<span class="string">&quot;HTTP_OPTIONS&quot;</span>)</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">readonly</span> <span class="attr">httpClient</span>: T;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Provider-등록"><a href="#Provider-등록" class="headerlink" title="Provider 등록"></a>Provider 등록</h3><p>위 과정을 통해서 <code>CatsService</code>라는 Provider를 만들어낸 것으로 볼 수 있다. 그리고 이는 <code>CatsController</code>에서 소비될 것이다. 따라서 이 서비스를 Nest에 등록하고 주입되도록 해야하는데, 이는 <code>app.module.ts</code>에서 <code>providers</code> 배열에 서비스를 더해주면 된다.</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Module</span> &#125; <span class="keyword">from</span> <span class="string">&quot;@nestjs/common&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">CatsController</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./cats/cats.controller&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">CatsService</span> &#125; <span class="keyword">from</span> <span class="string">&quot;./cats/cats.service&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Module</span>(&#123;</span><br><span class="line">  <span class="attr">controllers</span>: [<span class="title class_">CatsController</span>],</span><br><span class="line">  <span class="attr">providers</span>: [<span class="title class_">CatsService</span>]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">AppModule</span> &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>지금까지 예시에서 프로젝트의 디렉토리 구조는 다음과 같다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">src/</span><br><span class="line">    cats/</span><br><span class="line">        dto/</span><br><span class="line">            create-cat.dto.ts</span><br><span class="line">        interfaces/</span><br><span class="line">            cat.interface.ts</span><br><span class="line">        cats.service.ts</span><br><span class="line">        cats.controller.ts</span><br><span class="line">app.module.ts</span><br><span class="line">main.ts</span><br></pre></td></tr></table></figure>

<h2 id="후기"><a href="#후기" class="headerlink" title="후기"></a>후기</h2><p>DI와 IoC등 OOP관련 개념이 많이 등장하는데, 코드를 직접 써봐야 체감할 수 있을 것 같다. 무슨 말을 하는지는 알겠다. 그리고 디렉토리 구조가 마음에 들지 않는다. 최상위 <code>app.module.ts</code>에 Provider가 모이고, Controller에서는 생성자에 가져오는 코드만 작성하면 Nest가 알아서 Inject를 해주는 것 같은데, 만약 내가 <code>model</code> 부분의 코드를 분리해서 작성한다면? 그것도 <code>service</code>와 마찬가지로 provider에 등록하게 되는 건가? 그리고 <code>app.module.ts</code>에다가 몰빵해둬야 하는 구조인지는 모르겠지만 (여러 모듈로 나눠서 관리할 수 있을 것 같지만), 몰빵해야 하는 거는 좀 별로 같기도? 아마 다음에 Module에 대해서 보게 되니까 확인해보면 될 것 같다.</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://docs.nestjs.com/providers">https://docs.nestjs.com/providers</a></li>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://docs.nestjs.com/fundamentals/injection-scopes">https://docs.nestjs.com/fundamentals/injection-scopes</a></li>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://develogs.tistory.com/19">https://develogs.tistory.com/19</a></li>
<li><a target="_blank" rel="external nofollow noopener noreferrer" href="https://docs.nestjs.com/fundamentals/dependency-injection">https://docs.nestjs.com/fundamentals/dependency-injection</a></li>
</ul>
</div><div class="article-licensing box"><div class="licensing-title"><p>NestJS 빠르게 배우기 02</p><p><a href="https://changhoi.kim/posts/backend/nestjs-quicklearn-02/">https://changhoi.kim/posts/backend/nestjs-quicklearn-02/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>changhoi</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2020-03-21</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2020-03-21</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icons" rel="external nofollow noopener noreferrer" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="external nofollow noopener noreferrer" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="external nofollow noopener noreferrer" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/typescript/">typescript</a><a class="link-muted mr-2" rel="tag" href="/tags/nestjs/">nestjs</a><a class="link-muted mr-2" rel="tag" href="/tags/NestJS-%EB%B9%A0%EB%A5%B4%EA%B2%8C-%EB%B0%B0%EC%9A%B0%EA%B8%B0/">NestJS_빠르게_배우기</a></div><div class="a2a_kit a2a_kit_size_32 a2a_default_style"><a class="a2a_dd" target="_blank" rel="external nofollow noopener noreferrer" href="https://www.addtoany.com/share"></a><a class="a2a_button_facebook"></a><a class="a2a_button_twitter"></a><a class="a2a_button_telegram"></a><a class="a2a_button_whatsapp"></a><a class="a2a_button_reddit"></a></div><script src="https://static.addtoany.com/menu/page.js" defer></script></article></div><div class="card"><div class="card-content"><h3 class="title is-5">관련 글</h3><article class="media"><figure class="media-left"><a class="image" href="/posts/backend/grpc-internals/"><img src="/images/2022-02-22-grpc-internals/thumbnail.png" alt="gRPC를 지탱하는 기술"></a></figure><div class="media-content"><p class="date"><time datetime="2022-02-21T15:00:00.000Z">2022-02-22</time></p><p class="title"><a href="/posts/backend/grpc-internals/">gRPC를 지탱하는 기술</a></p><p class="categories"><a href="/categories/backend/">backend</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/posts/backend/go-lambda-try/"><img src="https://upload.wikimedia.org/wikipedia/commons/d/df/Go_gopher_app_engine_color.jpg" alt="Golang + Lambda로 신규 유저 정보 이메일로 보내기 삽질기"></a></figure><div class="media-content"><p class="date"><time datetime="2020-07-08T15:00:00.000Z">2020-07-09</time></p><p class="title"><a href="/posts/backend/go-lambda-try/">Golang + Lambda로 신규 유저 정보 이메일로 보내기 삽질기</a></p><p class="categories"><a href="/categories/backend/">backend</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/posts/backend/nest-todo-api-demo/"><img src="https://nestjs.com/img/nest-og.png" alt="Nest + TypeORM TODO API 만들기"></a></figure><div class="media-content"><p class="date"><time datetime="2020-03-25T15:00:00.000Z">2020-03-26</time></p><p class="title"><a href="/posts/backend/nest-todo-api-demo/">Nest + TypeORM TODO API 만들기</a></p><p class="categories"><a href="/categories/backend/">backend</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/posts/backend/nestjs-quicklearn-05/"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcQrPO0DAItnewF8q-FXXT_sT8FP5cBUjdv36Ul4jIaW8oPstDwg" alt="NestJS 빠르게 배우기 05"></a></figure><div class="media-content"><p class="date"><time datetime="2020-03-25T15:00:00.000Z">2020-03-26</time></p><p class="title"><a href="/posts/backend/nestjs-quicklearn-05/">NestJS 빠르게 배우기 05</a></p><p class="categories"><a href="/categories/backend/">backend</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/posts/backend/nestjs-quicklearn-04/"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcQrPO0DAItnewF8q-FXXT_sT8FP5cBUjdv36Ul4jIaW8oPstDwg" alt="NestJS 빠르게 배우기 04"></a></figure><div class="media-content"><p class="date"><time datetime="2020-03-24T15:00:00.000Z">2020-03-25</time></p><p class="title"><a href="/posts/backend/nestjs-quicklearn-04/">NestJS 빠르게 배우기 04</a></p><p class="categories"><a href="/categories/backend/">backend</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/posts/backend/nestjs-quicklearn-03/"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcQrPO0DAItnewF8q-FXXT_sT8FP5cBUjdv36Ul4jIaW8oPstDwg" alt="NestJS 빠르게 배우기 03"></a></figure><div class="media-content"><p class="date"><time datetime="2020-03-22T15:00:00.000Z">2020-03-23</time></p><p class="title"><a href="/posts/backend/nestjs-quicklearn-03/">NestJS 빠르게 배우기 03</a></p><p class="categories"><a href="/categories/backend/">backend</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/posts/backend/nestjs-quicklearn-01/"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcQrPO0DAItnewF8q-FXXT_sT8FP5cBUjdv36Ul4jIaW8oPstDwg" alt="NestJS 빠르게 배우기 01"></a></figure><div class="media-content"><p class="date"><time datetime="2020-03-19T15:00:00.000Z">2020-03-20</time></p><p class="title"><a href="/posts/backend/nestjs-quicklearn-01/">NestJS 빠르게 배우기 01</a></p><p class="categories"><a href="/categories/backend/">backend</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/posts/backend/serverside-typescript-setting-03/"><img src="https://devblogs.microsoft.com/typescript/wp-content/uploads/sites/11/2018/08/typescriptfeature.png" alt="Monolithic 서버사이드 타입스크립트 세팅 03"></a></figure><div class="media-content"><p class="date"><time datetime="2020-03-12T15:00:00.000Z">2020-03-13</time></p><p class="title"><a href="/posts/backend/serverside-typescript-setting-03/">Monolithic 서버사이드 타입스크립트 세팅 03</a></p><p class="categories"><a href="/categories/backend/">backend</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/posts/backend/serverside-typescript-setting-02/"><img src="https://devblogs.microsoft.com/typescript/wp-content/uploads/sites/11/2018/08/typescriptfeature.png" alt="Monolithic 서버사이드 타입스크립트 세팅 02"></a></figure><div class="media-content"><p class="date"><time datetime="2020-03-11T15:00:00.000Z">2020-03-12</time></p><p class="title"><a href="/posts/backend/serverside-typescript-setting-02/">Monolithic 서버사이드 타입스크립트 세팅 02</a></p><p class="categories"><a href="/categories/backend/">backend</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/posts/backend/serverside-typescript-setting-01/"><img src="https://devblogs.microsoft.com/typescript/wp-content/uploads/sites/11/2018/08/typescriptfeature.png" alt="Monolithic 서버사이드 타입스크립트 세팅 01"></a></figure><div class="media-content"><p class="date"><time datetime="2020-03-10T15:00:00.000Z">2020-03-11</time></p><p class="title"><a href="/posts/backend/serverside-typescript-setting-01/">Monolithic 서버사이드 타입스크립트 세팅 01</a></p><p class="categories"><a href="/categories/backend/">backend</a></p></div></article></div></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/posts/backend/nestjs-quicklearn-03/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">NestJS 빠르게 배우기 03</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/posts/backend/nestjs-quicklearn-01/"><span class="level-item">NestJS 빠르게 배우기 01</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card" id="comments"><div class="card-content"><h3 class="title is-5">댓글</h3><div class="fb-comments" data-width="100%" data-href="https://changhoi.kim/posts/backend/nestjs-quicklearn-02/" data-num-posts="5"></div><script>(function(d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s); js.id = id;
            js.src = "//connect.facebook.net/ko/sdk.js#xfbml=1&version=v12.0";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="https://avatars2.githubusercontent.com/u/34329147?s=400&amp;u=9d1b1dc88bc8ee5965f35b0160780264c3619eb6&amp;v=4" alt="Changhoi Kim"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Changhoi Kim</p><p class="is-size-6 is-block">Co-Founder of Bayesians</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Seoul, Korea</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">포스트</p><a href="/archives/"><p class="title">73</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">카테고리</p><a href="/categories/"><p class="title">13</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">태그</p><a href="/tags/"><p class="title">47</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://www.linkedin.com/in/changhoi/" target="_blank" rel="external nofollow noopener noreferrer">팔로우</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="external nofollow noopener noreferrer" title="LinkedIn" href="https://www.linkedin.com/in/changhoi/"><i class="fab fa-linkedin"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="external nofollow noopener noreferrer" title="Github" href="https://github.com/changhoi"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="external nofollow noopener noreferrer" title="Email" href="mailto:changhoi0522@gmail.com"><i class="fas fa-envelope-square"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="external nofollow noopener noreferrer" title="English" href="https://jayce.kim"><i class="fas fa-language"></i></a></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">카테고리</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/backend/"><span class="level-start"><span class="level-item">backend</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><li><a class="level is-mobile" href="/categories/books/"><span class="level-start"><span class="level-item">books</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/database/"><span class="level-start"><span class="level-item">database</span></span><span class="level-end"><span class="level-item tag">8</span></span></a></li><li><a class="level is-mobile" href="/categories/docker/"><span class="level-start"><span class="level-item">docker</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/essay/"><span class="level-start"><span class="level-item">essay</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/etc/"><span class="level-start"><span class="level-item">etc</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile" href="/categories/go/"><span class="level-start"><span class="level-item">go</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile" href="/categories/linux/"><span class="level-start"><span class="level-item">linux</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/logs/"><span class="level-start"><span class="level-item">logs</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/categories/network/"><span class="level-start"><span class="level-item">network</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/categories/os/"><span class="level-start"><span class="level-item">os</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/rust/"><span class="level-start"><span class="level-item">rust</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/serverless/"><span class="level-start"><span class="level-item">serverless</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">카탈로그</h3><ul class="menu-list"><li><a class="level is-mobile" href="#Provider"><span class="level-left"><span class="level-item">1</span><span class="level-item">Provider</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Services"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">Services</span></span></a></li><li><a class="level is-mobile" href="#Scopes"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">Scopes</span></span></a></li><li><a class="level is-mobile" href="#Custom-providers"><span class="level-left"><span class="level-item">1.3</span><span class="level-item">Custom providers</span></span></a></li><li><a class="level is-mobile" href="#선택적-Optional-Providers"><span class="level-left"><span class="level-item">1.4</span><span class="level-item">선택적(Optional) Providers</span></span></a></li><li><a class="level is-mobile" href="#Property-based-Injection"><span class="level-left"><span class="level-item">1.5</span><span class="level-item">Property-based Injection</span></span></a></li><li><a class="level is-mobile" href="#Provider-등록"><span class="level-left"><span class="level-item">1.6</span><span class="level-item">Provider 등록</span></span></a></li></ul></li><li><a class="level is-mobile" href="#후기"><span class="level-left"><span class="level-item">2</span><span class="level-item">후기</span></span></a></li><li><a class="level is-mobile" href="#Reference"><span class="level-left"><span class="level-item">3</span><span class="level-item">Reference</span></span></a></li></ul></div></div><script src="/js/toc.js" defer></script></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.jpg" alt="Changhoi Kim" height="28"></a><p class="is-size-7"><span>&copy; 2025 changhoi</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="external nofollow noopener noreferrer">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="external nofollow noopener noreferrer">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="external nofollow noopener noreferrer" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="external nofollow noopener noreferrer" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("ko");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script data-pjax src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="맨 위로" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script data-pjax src="/js/back_to_top.js" defer></script><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly.&amp;npsb;<a id="btnUpdateBrowser" target="_blank" rel="external nofollow noopener noreferrer" href="http://outdatedbrowser.com/">Update my browser now </a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">×</a></p></div><script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script><script>window.addEventListener("load", function () {
            outdatedBrowser({
                bgColor: '#f25648',
                color: '#ffffff',
                lowerThan: 'object-fit' // display on IE11 or below
            });
        });</script><!--!--><script data-pjax src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="입력 하세요..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script data-pjax src="/js/insight.js" defer></script><script data-pjax>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"입력 하세요...","untitled":"(제목 없음)","posts":"포스트","pages":"페이지","categories":"카테고리","tags":"태그"});
        });</script></body></html>